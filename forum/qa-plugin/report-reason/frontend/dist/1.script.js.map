{"version":3,"sources":["webpack:///./src/bootstrap.js","webpack:///./src/popupFactory.js"],"names":["bootstrapReportReasonPopup","init","reportReasonPopupDOMWrapper","reportReasonPopupDOMReferences","PopupController","reportReasonPopupForm","reportReasonFlagButtonHandler","FLAG_BTN_NAME_SUFFIX","PopupFactory","initOffClickHandler","initReasonList","initButtons","initPopupContainer","initReportReasonPopupDOMWrapper","initPopupDOMReferences","addEventListener","event","checkDOMElementsId","DOMElement","id","clickedOutsidePopup","composedPath","some","hideReportReasonPopup","reasonList","querySelector","target","reportReasonValidationError","classList","remove","children","length","contains","customReportReason","add","setTimeout","focus","bind","cancelButton","sendButton","submitForm","closeReportReasonSentInfo","popupContainer","document","appendChild","listItemsDOM","Object","entries","FLAG_REASONS_METADATA","REASON_LIST","reduce","listItems","index","flagReasonsCollection","reasonKey","reasonValue","isLast","textAreaDOM","elementsHTMLMap","get","popupWrapper","createElement","innerHTML","reportReasonPopup","reportReasonSuccessInfo","requirableFormElements","querySelectorAll","reset","getReportReasonPopupDOMReferences","getReportReasonPopupDOMWrapper","console","warn"],"mappings":"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","file":"1.script.js","sourcesContent":["import init from './popupFactory';\r\nimport PopupController from './popupController';\r\n\r\nconst bootstrapReportReasonPopup = () => {\r\n    const { reportReasonPopupDOMWrapper, reportReasonPopupDOMReferences } = init();\r\n    const { reportReasonFlagButtonHandler } = new PopupController(reportReasonPopupDOMReferences.reportReasonPopupForm, reportReasonPopupDOMWrapper);\r\n\r\n    return reportReasonFlagButtonHandler;\r\n};\r\n\r\nexport default bootstrapReportReasonPopup;\r\n","import { elementsHTMLMap } from './misc';\n// import submitForm from \"./formController\";\nimport handleFlagClick from './popupController';\n\nconst FLAG_BTN_NAME_SUFFIX = 'doflag';\n\nclass PopupFactory {\n\tconstructor() {\n\t\tthis.reportReasonPopupDOMWrapper = null;\n\t\tthis.reportReasonPopupDOMReferences = null;\n\n\t\tthis.initOffClickHandler();\n\t\tthis.initReasonList();\n\t\tthis.initButtons();\n\t\tthis.initPopupContainer();\n\t\tthis.initReportReasonPopupDOMWrapper();\n\t\tthis.initPopupDOMReferences();\n\t}\n\n\tinitOffClickHandler() {\n\t\tthis.reportReasonPopupDOMWrapper.addEventListener('click', (event) => {\n\t\t\tconst checkDOMElementsId = (DOMElement) =>\n\t\t\t\tDOMElement.id === 'reportReasonPopup' || DOMElement.id === 'reportReasonSuccessInfo';\n\t\t\tconst clickedOutsidePopup = !event.composedPath().some(checkDOMElementsId);\n\n\t\t\tif (clickedOutsidePopup) {\n\t\t\t\tthis.hideReportReasonPopup();\n\t\t\t}\n\t\t});\n\t}\n\n\tinitReasonList() {\n\t\tconst reasonList = this.reportReasonPopupDOMWrapper.querySelector('#reportReasonList');\n\t\treasonList.addEventListener('change', ({ target }) => {\n\t\t\tthis.reportReasonPopupDOMReferences.reportReasonValidationError.classList.remove('report-reason-popup__validation-error--show');\n\n\t\t\tif (reasonList.children[reasonList.children.length - 1].contains(target)) {\n\t\t\t\tthis.reportReasonPopupDOMReferences.customReportReason.classList.add('report-reason-popup__custom-report-reason--show');\n\t\t\t\tsetTimeout(this.reportReasonPopupDOMReferences.customReportReason.focus.bind(this.reportReasonPopupDOMReferences.customReportReason));\n\t\t\t} else {\n\t\t\t\tthis.reportReasonPopupDOMReferences.customReportReason.classList.remove('report-reason-popup__custom-report-reason--show');\n\t\t\t}\n\t\t});\n\t}\n\n\tinitButtons() {\n\t\tconst cancelButton = this.reportReasonPopupDOMWrapper.querySelector('#cancelReportReason');\n\t\tcancelButton.addEventListener('click', this.hideReportReasonPopup);\n\n\t\tconst sendButton = this.reportReasonPopupDOMWrapper.querySelector('#sendReportReason');\n\t\tsendButton.addEventListener('click', submitForm);\n\n\t\tconst closeReportReasonSentInfo = this.reportReasonPopupDOMWrapper.querySelector('#closeReportReasonSentInfo');\n\t\tcloseReportReasonSentInfo.addEventListener('click', this.hideReportReasonPopup);\n\t}\n\n\tinitPopupContainer() {\n\t\tconst popupContainer = document.querySelector('.qa-body-wrapper');\n\t\tpopupContainer.appendChild(this.reportReasonPopupDOMWrapper);\n\t}\n\n\tinitReportReasonPopupDOMWrapper() {\n\t\tconst listItemsDOM = Object.entries(FLAG_REASONS_METADATA.REASON_LIST).reduce(\n\t\t\t(listItems, [reasonKey, reasonValue], index, flagReasonsCollection) => {\n\t\t\t\tconst isLast = index === flagReasonsCollection.length - 1;\n\t\t\t\tconst textAreaDOM = isLast && elementsHTMLMap.get('textarea');\n\n\t\t\t\treturn (\n\t\t\t\t\tlistItems +\n\t\t\t\t\telementsHTMLMap.get('getListItem')({\n\t\t\t\t\t\treasonKey,\n\t\t\t\t\t\treasonValue,\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\tisLast,\n\t\t\t\t\t\ttextAreaDOM,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t},\n\t\t\t''\n\t\t);\n\n\t\tconst popupWrapper = document.createElement('div');\n\t\tpopupWrapper.classList.add('report-reason-wrapper');\n\t\tpopupWrapper.innerHTML = elementsHTMLMap.get('getPopupWrapper')(listItemsDOM);\n\n\t\tthis.reportReasonPopupDOMWrapper = popupWrapper;\n\t}\n\n\tinitPopupDOMReferences() {\n\t\tthis.reportReasonPopupDOMReferences = {\n\t\t\treportReasonPopup: this.reportReasonPopupDOMWrapper.querySelector( '#reportReasonPopup' ),\n\t\t\treportReasonPopupForm: this.reportReasonPopupDOMWrapper.querySelector( 'form' ),\n\t\t\tcustomReportReason: this.reportReasonPopupDOMWrapper.querySelector( '#customReportReason' ),\n\t\t\treportReasonSuccessInfo: this.reportReasonPopupDOMWrapper.querySelector( '#reportReasonSuccessInfo' ),\n\t\t\trequirableFormElements: this.reportReasonPopupDOMWrapper.querySelectorAll( '[data-requirable=\"true\"]' ),\n\t\t\treportReasonValidationError: this.reportReasonPopupDOMWrapper.querySelector( '#reportReasonValidationError' ),\n\t\t};\n\t}\n\n\thideReportReasonPopup() {\n\t\tthis.reportReasonPopupDOMReferences.reportReasonSuccessInfo.classList.remove('report-reason-popup__success-info--show');\n\t\tthis.reportReasonPopupDOMWrapper.classList.remove('report-reason-wrapper--show');\n\t\tthis.reportReasonPopupDOMReferences.customReportReason.classList.remove('report-reason-popup__custom-report-reason--show');\n\t\tthis.reportReasonPopupDOMReferences.reportReasonPopup.classList.remove('report-reason-popup--hide');\n\t\tthis.reportReasonPopupDOMReferences.reportReasonValidationError.classList.remove('report-reason-popup__validation-error--show');\n\t\tthis.reportReasonPopupDOMReferences.reportReasonPopupForm.reset();\n\t}\n\n\tgetReportReasonPopupDOMWrapper() {\n\t\treturn this.reportReasonPopupDOMWrapper;\n\t}\n\n\tgetReportReasonPopupDOMReferences() {\n\t\treturn this.reportReasonPopupDOMReferences;\n\t};\n}\n\n\n\nfunction init() {\n\tconst reportReasonPopup = new PopupFactory();\n\tconst reportReasonPopupDOMReferences = reportReasonPopup.getReportReasonPopupDOMReferences();\n\tconst reportReasonPopupDOMWrapper = reportReasonPopup.getReportReasonPopupDOMWrapper();\n\n\tconsole.warn('reportReasonPopupDOMReferences: ', reportReasonPopupDOMReferences, ' /reportReasonPopupDOMWrapper: ', reportReasonPopupDOMWrapper);\n\n\treturn { reportReasonPopupDOMWrapper, reportReasonPopupDOMReferences };\n}\n\n// export { reportReasonPopupDOMReferences, reportReasonPopupDOMWrapper };\n export default init;\n// export default bootstrapReportReasonPopup;\n"],"sourceRoot":""}