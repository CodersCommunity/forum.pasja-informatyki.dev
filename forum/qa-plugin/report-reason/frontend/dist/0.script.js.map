{"version":3,"sources":["webpack:///./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack:///./node_modules/@babel/runtime/helpers/arrayWithoutHoles.js","webpack:///./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack:///./node_modules/@babel/runtime/helpers/createClass.js","webpack:///./node_modules/@babel/runtime/helpers/defineProperty.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArray.js","webpack:///./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack:///./node_modules/@babel/runtime/helpers/nonIterableSpread.js","webpack:///./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack:///./node_modules/@babel/runtime/helpers/toConsumableArray.js","webpack:///./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack:///./src/bootstrap.js","webpack:///./src/flagController.js","webpack:///./src/formController.js","webpack:///./src/misc.js","webpack:///./src/popupFactory.js","webpack:///./src/unFlagButton.js"],"names":["bootstrapReportReasonPopup","init","reportReasonPopupDOMReferences","showReportReasonPopup","flagController","FlagController","reportReasonPopupForm","onClick","bind","FLAG_BTN_NAME_SUFFIX","flagButtonDOM","regex","question","answer","comment","doComment","event","target","name","endsWith","preventDefault","stopPropagation","form","action","postType","inputName","match","postId","Object","entries","find","regexKey","regexValue","test","mappedInputNameRegexKey","recognizeInputKindByName","postRootSource","getAttribute","postMetaData","questionId","split","slice","getPostIdFromInputName","reportReasonPopupDOMWrapper","questionViewMeta","document","querySelector","BTN_NAME_SUFFIXES_REGEX","reportFlagMap","onAjaxSuccess","response","formData","sendButton","toggleSendWaitingState","updateCurrentPostFlags","currentFlags","swapElement","getUnFlagButtonHTML","parentId","getPostParentId","showSuccessPopup","onAjaxError","ajaxError","console","warn","notifyAboutValidationError","reportReasonValidationError","classList","add","setTimeout","remove","buttonReference","isWaiting","disabled","window","qa_show_waiting_after","qa_hide_waiting","reportReasonPopup","reportReasonSuccessInfo","parentElement","closest","id","indexOf","FormController","isAnyFormElementUsed","requirableFormElements","some","element","isCheckedRadioInput","type","value","checked","isFilledTextArea","tagName","toLowerCase","collectedForumPostMetaData","FormData","getAll","reasonId","notice","reportType","blur","isFormValid","validateForm","prepareFormData","sendAjax","then","FLAG_REASONS_METADATA","NOTICE_LENGTH","POPUP_LABELS","referenceNode","html","tmpParent","createElement","innerHTML","newElement","removeChild","firstElementChild","parentNode","insertBefore","elementsHTMLMap","Map","reasonKey","reasonValue","index","isLast","textAreaDOM","listItemsDOM","HEADER","NO_REASON_CHECKED","CANCEL","SEND","REPORT_SENT","CLOSE","currentFlagsHTML","flagsMetadataWrapper","targetElementSelector","targetElement","outerHTML","responseAsDOM","DOMParser","parseFromString","appendChild","PopupFactory","submitForm","initReportReasonPopupDOMWrapper","initOffClickHandler","initReasonList","initButtons","initPopupContainer","initPopupDOMReferences","addEventListener","checkDOMElementsId","DOMElement","clickedOutsidePopup","composedPath","hideReportReasonPopup","reasonList","children","length","contains","customReportReason","focus","cancelButton","collectForumPostMetaData","closeReportReasonSentInfo","popupContainer","REASON_LIST","reduce","listItems","flagReasonsCollection","get","popupWrapper","querySelectorAll","reset","getReportReasonPopupDOMReferences","namePrefix","onclick","nameSuffix","title","clazz","Error"],"mappings":";;;;;;;;;AAAA;AACA;;AAEA,wCAAwC,SAAS;AACjD;AACA;;AAEA;AACA;;AAEA,mC;;;;;;;;;;;ACVA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACJA,uBAAuB,mBAAO,CAAC,qFAAoB;;AAEnD;AACA;AACA;;AAEA,oC;;;;;;;;;;;ACNA;AACA;AACA;AACA;AACA;;AAEA,iC;;;;;;;;;;;ACNA;AACA,iBAAiB,kBAAkB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,8B;;;;;;;;;;;AChBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;AACH;AACA;;AAEA;AACA;;AAEA,iC;;;;;;;;;;;ACfA;AACA;AACA;;AAEA,kC;;;;;;;;;;;ACJA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,6CAA6C,+BAA+B;AAC5E;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;;AAEA,uC;;;;;;;;;;;AC3BA;AACA;AACA;;AAEA,kC;;;;;;;;;;;ACJA;AACA;AACA;;AAEA,oC;;;;;;;;;;;ACJA,qBAAqB,mBAAO,CAAC,iFAAkB;;AAE/C,2BAA2B,mBAAO,CAAC,6FAAwB;;AAE3D,iCAAiC,mBAAO,CAAC,yGAA8B;;AAEvE,sBAAsB,mBAAO,CAAC,mFAAmB;;AAEjD;AACA;AACA;;AAEA,gC;;;;;;;;;;;ACZA,wBAAwB,mBAAO,CAAC,uFAAqB;;AAErD,sBAAsB,mBAAO,CAAC,mFAAmB;;AAEjD,iCAAiC,mBAAO,CAAC,yGAA8B;;AAEvE,wBAAwB,mBAAO,CAAC,uFAAqB;;AAErD;AACA;AACA;;AAEA,oC;;;;;;;;;;;ACZA,uBAAuB,mBAAO,CAAC,qFAAoB;;AAEnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,6C;;;;;;;;;;;;ACXA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;;AAEA,IAAMA,0BAA0B,GAAG,SAA7BA,0BAA6B,GAAM;AAAA,cAC0BC,6DAAI,EAD9B;AAAA,MAChCC,8BADgC,SAChCA,8BADgC;AAAA,MACAC,qBADA,SACAA,qBADA;;AAExC,MAAMC,cAAc,GAAG,IAAIC,uDAAJ,CAAmBH,8BAA8B,CAACI,qBAAlD,EAAyEH,qBAAzE,CAAvB;AAEA,SAAOC,cAAc,CAACG,OAAf,CAAuBC,IAAvB,CAA4BJ,cAA5B,CAAP;AACA,CALD;;AAOeJ,yFAAf,E;;;;;;;;;;;;;;;;;;;;;;;;ACXA;AACA;AAEA,IAAMS,oBAAoB,GAAG,QAA7B;;IAEMJ,c;AACL,0BAAYC,qBAAZ,EAAmCH,qBAAnC,EAA0D;AAAA;;AACzD,SAAKG,qBAAL,GAA6BA,qBAA7B;AACA,SAAKH,qBAAL,GAA6BA,qBAA7B;AACA,SAAKO,aAAL,GAAqB,IAArB;AAEA,SAAKC,KAAL,GAAa;AACZC,cAAQ,EAAE,UADE;AAEZC,YAAM,EAAE,gBAFI;AAGZC,aAAO,EAAE,gBAHG;AAIZC,eAAS,EAAE;AAJC,KAAb;AAMA;;;;4BAEQC,K,EAAO;AACf,UAAIA,KAAK,CAACC,MAAN,CAAaC,IAAb,IAAqBF,KAAK,CAACC,MAAN,CAAaC,IAAb,CAAkBC,QAAlB,CAA2BV,oBAA3B,CAAzB,EAA2E;AAC1EO,aAAK,CAACI,cAAN;AACAJ,aAAK,CAACK,eAAN;AAEA,aAAKX,aAAL,GAAqBM,KAAK,CAACC,MAA3B;AACA,aAAKX,qBAAL,GAA6BU,KAAK,CAACC,MAAN,CAAaK,IAAb,CAAkBC,MAA/C;AACA,aAAKpB,qBAAL;AACA;AACD;;;2CAEsBqB,Q,EAAUC,S,EAAW;AAC3C;AAD2C,6BAExBA,SAAS,CAACC,KAAV,CAAgB,KAAKf,KAAL,CAAWa,QAAX,CAAhB,CAFwB;AAAA;AAAA,UAElCG,MAFkC;;AAG3C,aAAOA,MAAP;AACA;;;6CAEwBF,S,EAAW;AAAA,iCACDG,MAAM,CAACC,OAAP,CAAe,KAAKlB,KAApB,EAA2BmB,IAA3B,CAAgC;AAAA;AAAA,YAAEC,QAAF;AAAA,YAAYC,UAAZ;;AAAA,eACjEA,UAAU,CAACC,IAAX,CAAgBR,SAAhB,CADiE;AAAA,OAAhC,CADC;AAAA;AAAA,UAC5BS,uBAD4B;;AAInC,aAAOA,uBAAP;AACA;;;+CAE0B;AAC1B,UAAMV,QAAQ,GAAG,KAAKW,wBAAL,CAA8B,KAAKzB,aAAL,CAAmBQ,IAAjD,CAAjB;AACA,UAAMkB,cAAc,GAAG,KAAK1B,aAAL,CAAmBY,IAAnB,CAAwBe,YAAxB,CAAqC,QAArC,CAAvB;AACA,UAAMC,YAAY,GAAG;AACpBC,kBAAU,EAAEH,cAAc,CAACI,KAAf,CAAqB,GAArB,EAA0B,CAA1B,CADQ;AAEpBhB,gBAAQ,EAAEA,QAAQ,CAACiB,KAAT,CAAe,CAAf,EAAkB,CAAlB;AAFU,OAArB;AAIAH,kBAAY,CAACX,MAAb,GAAsB,KAAKe,sBAAL,CAA4BlB,QAA5B,EAAsC,KAAKd,aAAL,CAAmBQ,IAAzD,KAAkEoB,YAAY,CAACC,UAArG;AAEA,aAAOD,YAAP;AACA;;;;;;AAGF,IAAIK,2BAA2B,GAAG,IAAlC;AACA,IAAIzC,8BAA8B,GAAG,IAArC,C,CAEA;AAEA;AACA;AACA;AACA;AACA;AACA;;AACA,IAAM0C,gBAAgB,GAAGC,QAAQ,CAACC,aAAT,CAAuB,iBAAvB,CAAzB;AAEA,IAAMC,uBAAuB,GAAG,uBAAhC,C,CACA;;AACA,IAAMC,aAAa,GAAG,EAAtB;;AAIA,SAASC,aAAT,CAAuBC,QAAvB,EAAiCC,QAAjC,EAA2CC,UAA3C,EAAuD;AACtDC,wBAAsB,CAACD,UAAD,EAAa,KAAb,CAAtB;AACAE,sEAAsB,CAACJ,QAAQ,CAACK,YAAV,EAAwBJ,QAAxB,CAAtB;AACAK,2DAAW,CACV9C,aADU,EAEV+C,6DAAmB,CAAC;AACnBjC,YAAQ,EAAE2B,QAAQ,CAAC3B,QADA;AAEnBe,cAAU,EAAEY,QAAQ,CAACZ,UAFF;AAGnBZ,UAAM,EAAEwB,QAAQ,CAACxB,MAHE;AAInB+B,YAAQ,EAAEC,eAAe;AAJN,GAAD,CAFT,CAAX;AASAC,kBAAgB;AAChB;;AAED,SAASC,WAAT,CAAqBT,UAArB,EAAiCU,SAAjC,EAA4C;AAC3CT,wBAAsB,CAACD,UAAD,EAAa,KAAb,CAAtB,CAD2C,CAE3C;;AACAW,SAAO,CAACC,IAAR,CAAa,YAAb,EAA2BF,SAA3B;AACA;;AAED,SAASG,0BAAT,CAAoCb,UAApC,EAAgD;AAC/Cc,6BAA2B,CAACC,SAA5B,CAAsCC,GAAtC,CAA0C,6CAA1C;AACAhB,YAAU,CAACe,SAAX,CAAqBC,GAArB,CAAyB,qDAAzB;AACAC,YAAU,CAAC,YAAM;AAChBjB,cAAU,CAACe,SAAX,CAAqBG,MAArB,CAA4B,qDAA5B;AACA,GAFS,EAEP,IAFO,CAAV;AAGA;;AAED,SAASjB,sBAAT,CAAgCkB,eAAhC,EAAiDC,SAAjD,EAA4D;AAC3D,MAAIA,SAAJ,EAAe;AACdD,mBAAe,CAACE,QAAhB,GAA2B,IAA3B;AACAC,UAAM,CAACC,qBAAP,CAA6BJ,eAA7B,EAA8C,IAA9C;AACA,GAHD,MAGO;AACNG,UAAM,CAACE,eAAP,CAAuBL,eAAvB;AACAA,mBAAe,CAACE,QAAhB,GAA2B,KAA3B;AACA;AACD;;AAED,SAASb,gBAAT,GAA4B;AAC3BiB,mBAAiB,CAACV,SAAlB,CAA4BC,GAA5B,CAAgC,2BAAhC;AACAU,yBAAuB,CAACX,SAAxB,CAAkCC,GAAlC,CAAsC,qBAAtC,EAA6D,yCAA7D;AACA;;AAED,SAAST,eAAT,CAAyBjD,aAAzB,EAAwC;AACvC,MAAMqE,aAAa,GAAGrE,aAAa,CAACsE,OAAd,CAAsB,eAAtB,CAAtB;;AAEA,MAAI,CAACD,aAAL,EAAoB;AACnB,WAAO,IAAP;AACA;;AAED,SAAOA,aAAa,CAACE,EAAd,CAAiBxC,KAAjB,CAAuB,CAAvB,EAA0BsC,aAAa,CAACE,EAAd,CAAiBC,OAAjB,CAAyB,GAAzB,CAA1B,CAAP;AACA,C,CAED;;;AAEe7E,6EAAf,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnIA;AACA;IAEM8E,c;AACL,0BAAY7E,qBAAZ,EAAmC;AAAA;;AAClC,SAAKA,qBAAL,GAA6BA,qBAA7B;AACA;;;;iCAEYJ,8B,EAAgCkD,U,EAAY;AACxD,UAAMgC,oBAAoB,GAAG,gFAAIlF,8BAA8B,CAACmF,sBAAnC,EAA2DC,IAA3D,CAAgE,UAACC,OAAD,EAAa;AACzG,YAAMC,mBAAmB,GAAGD,OAAO,CAACE,IAAR,KAAiB,OAAjB,IAA4BF,OAAO,CAACG,KAAR,KAAkB,QAA9C,IAA0DH,OAAO,CAACI,OAA9F;AACA,YAAMC,gBAAgB,GAAGL,OAAO,CAACM,OAAR,CAAgBC,WAAhB,OAAkC,UAAlC,IAAgDP,OAAO,CAACG,KAAjF;AAEA,eAAOF,mBAAmB,IAAII,gBAA9B;AACA,OAL4B,CAA7B;;AAOA,UAAI,CAACR,oBAAL,EAA2B;AAC1BnB,kCAA0B,CAACb,UAAD,CAA1B;AACA;;AAED,aAAOgC,oBAAP;AACA;;;oCAEeW,0B,EAA4B;AAAA,6BAChB,IAAIC,QAAJ,CAAa,KAAK1F,qBAAlB,EAAyC2F,MAAzC,CAAgD,cAAhD,CADgB;AAAA;AAAA,UACpCC,QADoC;AAAA,UAC1BC,MAD0B;;AAG3C,6CACIJ,0BADJ;AAECG,gBAAQ,EAARA,QAFD;AAGCC,cAAM,EAANA,MAHD;AAICC,kBAAU,EAAE;AAJb;AAMA;;;+BAEUpF,K,EAAO+E,0B,EAA4B;AAC7C/E,WAAK,CAACI,cAAN;AAEA,UAAMgC,UAAU,GAAGpC,KAAK,CAACC,MAAzB;AACAmC,gBAAU,CAACiD,IAAX;AAEA,UAAMC,WAAW,GAAG,KAAKC,YAAL,CAAkBnD,UAAlB,CAApB;;AACA,UAAI,CAACkD,WAAL,EAAkB;AACjB;AACA;;AAEDjD,4BAAsB,CAACD,UAAD,EAAa,IAAb,CAAtB;AAEA,UAAMD,QAAQ,GAAG,KAAKqD,eAAL,CAAqBT,0BAArB,CAAjB;AACAU,cAAQ,CAACtD,QAAD,CAAR,CAAmBuD,IAAnB,CACC,UAACxD,QAAD,EAAc;AACba,eAAO,CAACC,IAAR,CAAa,WAAb,EAA0Bd,QAA1B;AACAD,qBAAa,CAACC,QAAD,EAAWC,QAAX,EAAqBC,UAArB,CAAb;AACA,OAJF,EAKC,UAACU,SAAD;AAAA,eAAeD,WAAW,CAACT,UAAD,EAAaU,SAAb,CAA1B;AAAA,OALD;AAOA;;;;;;AAGaqB,6EAAf,E;;;;;;;;;;;;;;;;4BC1DwCwB,qB;IAAhCC,a,yBAAAA,a;IAAeC,Y,yBAAAA,Y;;AAEvB,IAAMrD,WAAW,GAAG,SAAdA,WAAc,CAACsD,aAAD,EAAgBC,IAAhB,EAAyB;AAC5C,MAAMC,SAAS,GAAGnE,QAAQ,CAACoE,aAAT,CAAuB,KAAvB,CAAlB;AACAD,WAAS,CAACE,SAAV,GAAsBH,IAAtB;AAEA,MAAMI,UAAU,GAAGH,SAAS,CAACI,WAAV,CAAsBJ,SAAS,CAACK,iBAAhC,CAAnB;AACAP,eAAa,CAACQ,UAAd,CAAyBC,YAAzB,CAAsCJ,UAAtC,EAAkDL,aAAlD;AACAA,eAAa,CAACxC,MAAd,GAN4C,CAQ5C;AACA,CATD;;AAWA,IAAMkD,eAAe,GAAG,IAAIC,GAAJ,CAAQ,CAC/B,CACC,UADD,2LAMeb,aANf,yDAD+B,EAW/B,CACC,aADD,EAEC,gBAA4D;AAAA,MAAzDc,SAAyD,QAAzDA,SAAyD;AAAA,MAA9CC,WAA8C,QAA9CA,WAA8C;AAAA,MAAjCC,KAAiC,QAAjCA,KAAiC;AAAA,MAA1BC,MAA0B,QAA1BA,MAA0B;AAAA,MAAlBC,WAAkB,QAAlBA,WAAkB;AAC3D,sIAGgBJ,SAHhB,0CAIgBA,SAJhB,2EAMcE,KANd,iHASKD,WATL,6CAWIE,MAAM,GAAGC,WAAH,GAAiB,EAX3B;AAcA,CAjBF,CAX+B,EA8B/B,CACC,iBADD,EAEC,UAACC,YAAD,EAAkB;AACjB,wGAEOlB,YAAY,CAACmB,MAFpB,iLAKiED,YALjE,kIAOuFlB,YAAY,CAACoB,iBAPpG,4JAUyDpB,YAAY,CAACqB,MAVtE,gOAWuHrB,YAAY,CAACsB,IAXpI,+JAeItB,YAAY,CAACuB,WAfjB,2JAgBgIvB,YAAY,CAACwB,KAhB7I;AAkBA,CArBF,CA9B+B,CAAR,CAAxB;;AAuDA,SAAS/E,sBAAT,CAAgCgF,gBAAhC,SAAwE;AAAA,MAApB9G,QAAoB,SAApBA,QAAoB;AAAA,MAAVG,MAAU,SAAVA,MAAU;AACvE,MAAM4G,oBAAoB,GACzB/G,QAAQ,KAAK,GAAb,GAAmBoB,gBAAnB,GAAsCC,QAAQ,CAACC,aAAT,YAA2BtB,QAA3B,SAAsCG,MAAtC,kBAAoDH,QAApD,gBADvC;AAEA,MAAMgH,qBAAqB,iBAAUhH,QAAV,gBAA3B;AACA,MAAMiH,aAAa,GAAGF,oBAAoB,CAACzF,aAArB,CAAmC0F,qBAAnC,CAAtB;;AAEA,MAAIC,aAAJ,EAAmB;AAClB;AACAA,iBAAa,CAACC,SAAd,GAA0BJ,gBAA1B;AACA,GAHD,MAGO;AACN,QAAMK,aAAa,GAAG,IAAIC,SAAJ,GACpBC,eADoB,CACJP,gBADI,EACc,WADd,EAEpBxF,aAFoB,CAEN0F,qBAFM,CAAtB;AAGAD,wBAAoB,CAACO,WAArB,CAAiCH,aAAjC;AACA;AACD;;;;;;;;;;;;;;;;;;;;;;;;;;;ACnFD;CAEA;;AACA;;IAEMI,Y;AACL,wBAAYC,UAAZ,EAAwB;AAAA;;AACvB,SAAKrG,2BAAL,GAAmC,IAAnC;AACA,SAAKzC,8BAAL,GAAsC,IAAtC;AACA,SAAK8I,UAAL,GAAkBA,UAAlB;AAEA,SAAKC,+BAAL;AACA,SAAKC,mBAAL;AACA,SAAKC,cAAL;AACA,SAAKC,WAAL;AACA,SAAKC,kBAAL;AACA,SAAKC,sBAAL;AACA;;;;0CAEqB;AAAA;;AACrB,WAAK3G,2BAAL,CAAiC4G,gBAAjC,CAAkD,OAAlD,EAA2D,UAACvI,KAAD,EAAW;AACrE,YAAMwI,kBAAkB,GAAG,SAArBA,kBAAqB,CAACC,UAAD;AAAA,iBAC1BA,UAAU,CAACxE,EAAX,KAAkB,mBAAlB,IAAyCwE,UAAU,CAACxE,EAAX,KAAkB,yBADjC;AAAA,SAA3B;;AAEA,YAAMyE,mBAAmB,GAAG,CAAC1I,KAAK,CAAC2I,YAAN,GAAqBrE,IAArB,CAA0BkE,kBAA1B,CAA7B;;AAEA,YAAIE,mBAAJ,EAAyB;AACxB,eAAI,CAACE,qBAAL;AACA;AACD,OARD;AASA;;;qCAEgB;AAAA;;AAChB,UAAMC,UAAU,GAAG,KAAKlH,2BAAL,CAAiCG,aAAjC,CAA+C,mBAA/C,CAAnB;AACA+G,gBAAU,CAACN,gBAAX,CAA4B,QAA5B,EAAsC,gBAAgB;AAAA,YAAbtI,MAAa,QAAbA,MAAa;;AACrD,cAAI,CAACf,8BAAL,CAAoCgE,2BAApC,CAAgEC,SAAhE,CAA0EG,MAA1E,CACC,6CADD;;AAIA,YAAIuF,UAAU,CAACC,QAAX,CAAoBD,UAAU,CAACC,QAAX,CAAoBC,MAApB,GAA6B,CAAjD,EAAoDC,QAApD,CAA6D/I,MAA7D,CAAJ,EAA0E;AACzE,gBAAI,CAACf,8BAAL,CAAoC+J,kBAApC,CAAuD9F,SAAvD,CAAiEC,GAAjE,CACC,iDADD;;AAGAC,oBAAU,CACT,MAAI,CAACnE,8BAAL,CAAoC+J,kBAApC,CAAuDC,KAAvD,CAA6D1J,IAA7D,CACC,MAAI,CAACN,8BAAL,CAAoC+J,kBADrC,CADS,CAAV;AAKA,SATD,MASO;AACN,gBAAI,CAAC/J,8BAAL,CAAoC+J,kBAApC,CAAuD9F,SAAvD,CAAiEG,MAAjE,CACC,iDADD;AAGA;AACD,OAnBD;AAoBA;;;kCAEa;AAAA;;AACb,UAAM6F,YAAY,GAAG,KAAKxH,2BAAL,CAAiCG,aAAjC,CAA+C,qBAA/C,CAArB;AACAqH,kBAAY,CAACZ,gBAAb,CAA8B,OAA9B,EAAuC,KAAKK,qBAA5C;AAEA,UAAMxG,UAAU,GAAG,KAAKT,2BAAL,CAAiCG,aAAjC,CAA+C,mBAA/C,CAAnB;AACAM,gBAAU,CAACmG,gBAAX,CAA4B,OAA5B,EAAqC,UAACvI,KAAD,EAAW;AAC/C,cAAI,CAACgI,UAAL,CAAgBhI,KAAhB,EAAuB,MAAI,CAACoJ,wBAAL,EAAvB;AACA,OAFD;AAIA,UAAMC,yBAAyB,GAAG,KAAK1H,2BAAL,CAAiCG,aAAjC,CAA+C,4BAA/C,CAAlC;AACAuH,+BAAyB,CAACd,gBAA1B,CAA2C,OAA3C,EAAoD,KAAKK,qBAAzD;AACA;;;yCAEoB;AACpB,UAAMU,cAAc,GAAGzH,QAAQ,CAACC,aAAT,CAAuB,kBAAvB,CAAvB;AACAwH,oBAAc,CAACxB,WAAf,CAA2B,KAAKnG,2BAAhC;AACA;;;sDAEiC;AACjC,UAAMoF,YAAY,GAAGnG,MAAM,CAACC,OAAP,CAAe8E,qBAAqB,CAAC4D,WAArC,EAAkDC,MAAlD,CACpB,UAACC,SAAD,SAAsC7C,KAAtC,EAA6C8C,qBAA7C,EAAuE;AAAA;AAAA,YAA1DhD,SAA0D;AAAA,YAA/CC,WAA+C;;AACtE,YAAME,MAAM,GAAGD,KAAK,KAAK8C,qBAAqB,CAACX,MAAtB,GAA+B,CAAxD;AACA,YAAMjC,WAAW,GAAGD,MAAM,IAAIL,qDAAe,CAACmD,GAAhB,CAAoB,UAApB,CAA9B;AAEA,eACCF,SAAS,GACTjD,qDAAe,CAACmD,GAAhB,CAAoB,aAApB,EAAmC;AAClCjD,mBAAS,EAATA,SADkC;AAElCC,qBAAW,EAAXA,WAFkC;AAGlCC,eAAK,EAALA,KAHkC;AAIlCC,gBAAM,EAANA,MAJkC;AAKlCC,qBAAW,EAAXA;AALkC,SAAnC,CAFD;AAUA,OAfmB,EAgBpB,EAhBoB,CAArB;AAmBA,UAAM8C,YAAY,GAAG/H,QAAQ,CAACoE,aAAT,CAAuB,KAAvB,CAArB;AACA2D,kBAAY,CAACzG,SAAb,CAAuBC,GAAvB,CAA2B,uBAA3B;AACAwG,kBAAY,CAAC1D,SAAb,GAAyBM,qDAAe,CAACmD,GAAhB,CAAoB,iBAApB,EAAuC5C,YAAvC,CAAzB;AAEA,WAAKpF,2BAAL,GAAmCiI,YAAnC;AACA;;;6CAEwB;AACxB,WAAK1K,8BAAL,GAAsC;AACrC2E,yBAAiB,EAAE,KAAKlC,2BAAL,CAAiCG,aAAjC,CAA+C,oBAA/C,CADkB;AAErCxC,6BAAqB,EAAE,KAAKqC,2BAAL,CAAiCG,aAAjC,CAA+C,MAA/C,CAFc;AAGrCmH,0BAAkB,EAAE,KAAKtH,2BAAL,CAAiCG,aAAjC,CAA+C,qBAA/C,CAHiB;AAIrCgC,+BAAuB,EAAE,KAAKnC,2BAAL,CAAiCG,aAAjC,CAA+C,0BAA/C,CAJY;AAKrCuC,8BAAsB,EAAE,KAAK1C,2BAAL,CAAiCkI,gBAAjC,CAAkD,0BAAlD,CALa;AAMrC3G,mCAA2B,EAAE,KAAKvB,2BAAL,CAAiCG,aAAjC,CAA+C,8BAA/C;AANQ,OAAtC;AAQA;;;4CAEuB;AACvB,WAAKH,2BAAL,CAAiCwB,SAAjC,CAA2CC,GAA3C,CAA+C,6BAA/C;AACA;;;4CAEuB;AACvB,WAAKlE,8BAAL,CAAoC4E,uBAApC,CAA4DX,SAA5D,CAAsEG,MAAtE,CACC,yCADD;AAGA,WAAK3B,2BAAL,CAAiCwB,SAAjC,CAA2CG,MAA3C,CAAkD,6BAAlD;AACA,WAAKpE,8BAAL,CAAoC+J,kBAApC,CAAuD9F,SAAvD,CAAiEG,MAAjE,CACC,iDADD;AAGA,WAAKpE,8BAAL,CAAoC2E,iBAApC,CAAsDV,SAAtD,CAAgEG,MAAhE,CAAuE,2BAAvE;AACA,WAAKpE,8BAAL,CAAoCgE,2BAApC,CAAgEC,SAAhE,CAA0EG,MAA1E,CACC,6CADD;AAGA,WAAKpE,8BAAL,CAAoCI,qBAApC,CAA0DwK,KAA1D;AACA,K,CAED;AACA;AACA;;;;wDAEoC;AACnC,aAAO,KAAK5K,8BAAZ;AACA;;;;;;AAGF,SAASD,IAAT,GAAgB;AACf,MAAM4E,iBAAiB,GAAG,IAAIkE,YAAJ,EAA1B;AACA,MAAM7I,8BAA8B,GAAG2E,iBAAiB,CAACkG,iCAAlB,EAAvC;AACA;;AAA2B,MAAI5F,uDAAJ,CAAmBjF,8BAA8B,CAACI,qBAAlD,EAHZ,CAIf;;AAEAyD,SAAO,CAACC,IAAR,CACC,kCADD,EAEC9D;AAA+B;AAFhC;AAKA,SAAO;AACN;AAAiCA,kCAA8B,EAA9BA,8BAD3B;AAENC,yBAAqB,EAAE0E,iBAAiB,CAAC1E,qBAAlB,CAAwCK,IAAxC,CAA6CqE,iBAA7C;AAFjB,GAAP;AAIA,C,CAED;;;AACe5E,mEAAf,E,CACA,6C;;;;;;;;;;;;AC9JA;AAAA,SAASwD,mBAAT,OAAyE;AAAA,MAA1CjC,QAA0C,QAA1CA,QAA0C;AAAA,MAAhCe,UAAgC,QAAhCA,UAAgC;AAAA,MAApBZ,MAAoB,QAApBA,MAAoB;AAAA,MAAZ+B,QAAY,QAAZA,QAAY;AACxE,MAAIsH,UAAU,GAAGxJ,QAAQ,GAAGG,MAA5B;AACA,MAAIsJ,OAAO,GAAG,EAAd;AAEA,MAAMC,UAAU,GAAG,WAAnB;AACA,MAAMxF,KAAK,GAAG,oBAAd;AACA,MAAMyF,KAAK,GAAG,+BAAd;AACA,MAAM1F,IAAI,GAAG,QAAb;AACA,MAAM2F,KAAK,GAAG,kDAAd;;AAEA,UAAQ5J,QAAR;AACC,SAAK,GAAL;AAAU;AACTyJ,eAAO,GAAG,oCAAV;AACAD,kBAAU,GAAGxJ,QAAb;AACA;AACA;;AACD,SAAK,GAAL;AAAU;AACTyJ,eAAO,oCAA6BtJ,MAA7B,eAAwCY,UAAxC,aAAP;AACA;AACA;;AACD,SAAK,GAAL;AAAU;AACT0I,eAAO,qCAA8BtJ,MAA9B,eAAyCY,UAAzC,eAAwDmB,QAAxD,aAAP;AACA;AACA;;AACD;AAAS;AACR,cAAM,IAAI2H,KAAJ,kCAAoC7J,QAApC,8BAAgEe,UAAhE,0BAA0FZ,MAA1F,EAAN;AACA;AAhBF;;AAmBA,uCACgBqJ,UADhB,SAC6BE,UAD7B,kCAEaD,OAFb,+BAGWvF,KAHX,+BAIWyF,KAJX,8BAKU1F,IALV,gCAMW2F,KANX;AAQA;;AAEc3H,kFAAf,E","file":"0.script.js","sourcesContent":["function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _arrayWithoutHoles(arr) {\n  if (Array.isArray(arr)) return arrayLikeToArray(arr);\n}\n\nmodule.exports = _arrayWithoutHoles;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","function _iterableToArray(iter) {\n  if (typeof Symbol !== \"undefined\" && Symbol.iterator in Object(iter)) return Array.from(iter);\n}\n\nmodule.exports = _iterableToArray;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","function _nonIterableSpread() {\n  throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableSpread;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","var arrayWithoutHoles = require(\"./arrayWithoutHoles\");\n\nvar iterableToArray = require(\"./iterableToArray\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableSpread = require(\"./nonIterableSpread\");\n\nfunction _toConsumableArray(arr) {\n  return arrayWithoutHoles(arr) || iterableToArray(arr) || unsupportedIterableToArray(arr) || nonIterableSpread();\n}\n\nmodule.exports = _toConsumableArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","import init from './popupFactory';\nimport FlagController from './flagController';\nimport FormController from './formController';\n\nconst bootstrapReportReasonPopup = () => {\n\tconst { reportReasonPopupDOMReferences, showReportReasonPopup } = init();\n\tconst flagController = new FlagController(reportReasonPopupDOMReferences.reportReasonPopupForm, showReportReasonPopup);\n\n\treturn flagController.onClick.bind(flagController);\n};\n\nexport default bootstrapReportReasonPopup;\n","import getUnFlagButtonHTML from './unFlagButton';\nimport { swapElement, updateCurrentPostFlags } from './misc';\n\nconst FLAG_BTN_NAME_SUFFIX = 'doflag';\n\nclass FlagController {\n\tconstructor(reportReasonPopupForm, showReportReasonPopup) {\n\t\tthis.reportReasonPopupForm = reportReasonPopupForm;\n\t\tthis.showReportReasonPopup = showReportReasonPopup;\n\t\tthis.flagButtonDOM = null;\n\n\t\tthis.regex = {\n\t\t\tquestion: /q_doflag/,\n\t\t\tanswer: /^a(\\d+)_doflag/,\n\t\t\tcomment: /^c(\\d+)_doflag/,\n\t\t\tdoComment: /^a(\\d+)_docomment/,\n\t\t};\n\t}\n\n\tonClick( event) {\n\t\tif (event.target.name && event.target.name.endsWith(FLAG_BTN_NAME_SUFFIX)) {\n\t\t\tevent.preventDefault();\n\t\t\tevent.stopPropagation();\n\n\t\t\tthis.flagButtonDOM = event.target;\n\t\t\tthis.reportReasonPopupForm = event.target.form.action;\n\t\t\tthis.showReportReasonPopup();\n\t\t}\n\t}\n\n\tgetPostIdFromInputName(postType, inputName) {\n\t\t// TODO: check if it works (changed exec to match)...\n\t\tconst [, postId] = inputName.match(this.regex[postType]);\n\t\treturn postId;\n\t}\n\n\trecognizeInputKindByName(inputName) {\n\t\tconst [mappedInputNameRegexKey] = Object.entries(this.regex).find(([regexKey, regexValue]) =>\n\t\t\tregexValue.test(inputName)\n\t\t);\n\t\treturn mappedInputNameRegexKey;\n\t}\n\n\tcollectForumPostMetaData() {\n\t\tconst postType = this.recognizeInputKindByName(this.flagButtonDOM.name);\n\t\tconst postRootSource = this.flagButtonDOM.form.getAttribute('action');\n\t\tconst postMetaData = {\n\t\t\tquestionId: postRootSource.split('/')[1],\n\t\t\tpostType: postType.slice(0, 1),\n\t\t};\n\t\tpostMetaData.postId = this.getPostIdFromInputName(postType, this.flagButtonDOM.name) || postMetaData.questionId;\n\n\t\treturn postMetaData;\n\t}\n}\n\nlet reportReasonPopupDOMWrapper = null;\nlet reportReasonPopupDOMReferences = null;\n\n// console.warn('reportReasonPopupDOMWrapper: ', reportReasonPopupDOMWrapper);\n\n// const {\n// \t// reportReasonPopup,\n// \t// reportReasonPopupForm,\n// \treportReasonSuccessInfo,\n// \treportReasonValidationError,\n// } = reportReasonPopupDOMReferences;\nconst questionViewMeta = document.querySelector('.qa-q-view-meta');\n\nconst BTN_NAME_SUFFIXES_REGEX = /do(clear|un)?flag[s]?/;\n// const doCommentInputNameSuffix = '_docomment';\nconst reportFlagMap = {\n\n};\n\nfunction onAjaxSuccess(response, formData, sendButton) {\n\ttoggleSendWaitingState(sendButton, false);\n\tupdateCurrentPostFlags(response.currentFlags, formData);\n\tswapElement(\n\t\tflagButtonDOM,\n\t\tgetUnFlagButtonHTML({\n\t\t\tpostType: formData.postType,\n\t\t\tquestionId: formData.questionId,\n\t\t\tpostId: formData.postId,\n\t\t\tparentId: getPostParentId(),\n\t\t})\n\t);\n\tshowSuccessPopup();\n}\n\nfunction onAjaxError(sendButton, ajaxError) {\n\ttoggleSendWaitingState(sendButton, false);\n\t// TODO: add proper error handling\n\tconsole.warn('ajaxError:', ajaxError);\n}\n\nfunction notifyAboutValidationError(sendButton) {\n\treportReasonValidationError.classList.add('report-reason-popup__validation-error--show');\n\tsendButton.classList.add('report-reason-popup__button--save--validation-blink');\n\tsetTimeout(() => {\n\t\tsendButton.classList.remove('report-reason-popup__button--save--validation-blink');\n\t}, 1000);\n}\n\nfunction toggleSendWaitingState(buttonReference, isWaiting) {\n\tif (isWaiting) {\n\t\tbuttonReference.disabled = true;\n\t\twindow.qa_show_waiting_after(buttonReference, true);\n\t} else {\n\t\twindow.qa_hide_waiting(buttonReference);\n\t\tbuttonReference.disabled = false;\n\t}\n}\n\nfunction showSuccessPopup() {\n\treportReasonPopup.classList.add('report-reason-popup--hide');\n\treportReasonSuccessInfo.classList.add('report-reason-popup', 'report-reason-popup__success-info--show');\n}\n\nfunction getPostParentId(flagButtonDOM) {\n\tconst parentElement = flagButtonDOM.closest('[id*=\"_list\"]');\n\n\tif (!parentElement) {\n\t\treturn null;\n\t}\n\n\treturn parentElement.id.slice(1, parentElement.id.indexOf('_'));\n}\n\n// export { handleFlagClick };\n\nexport default FlagController;\n","// import sendAjax from \"./ajaxService\";\r\n// import { reportReasonPopupDOMReferences } from './popupFactory';\r\n\r\nclass FormController {\r\n\tconstructor(reportReasonPopupForm) {\r\n\t\tthis.reportReasonPopupForm = reportReasonPopupForm;\r\n\t}\r\n\r\n\tvalidateForm(reportReasonPopupDOMReferences, sendButton) {\r\n\t\tconst isAnyFormElementUsed = [...reportReasonPopupDOMReferences.requirableFormElements].some((element) => {\r\n\t\t\tconst isCheckedRadioInput = element.type === 'radio' && element.value !== 'custom' && element.checked;\r\n\t\t\tconst isFilledTextArea = element.tagName.toLowerCase() === 'textarea' && element.value;\r\n\r\n\t\t\treturn isCheckedRadioInput || isFilledTextArea;\r\n\t\t});\r\n\r\n\t\tif (!isAnyFormElementUsed) {\r\n\t\t\tnotifyAboutValidationError(sendButton);\r\n\t\t}\r\n\r\n\t\treturn isAnyFormElementUsed;\r\n\t}\r\n\r\n\tprepareFormData(collectedForumPostMetaData) {\r\n\t\tconst [reasonId, notice] = new FormData(this.reportReasonPopupForm).getAll('reportReason');\r\n\r\n\t\treturn {\r\n\t\t\t...collectedForumPostMetaData,\r\n\t\t\treasonId,\r\n\t\t\tnotice,\r\n\t\t\treportType: 'addFlag',\r\n\t\t};\r\n\t}\r\n\r\n\tsubmitForm(event, collectedForumPostMetaData) {\r\n\t\tevent.preventDefault();\r\n\r\n\t\tconst sendButton = event.target;\r\n\t\tsendButton.blur();\r\n\r\n\t\tconst isFormValid = this.validateForm(sendButton);\r\n\t\tif (!isFormValid) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\ttoggleSendWaitingState(sendButton, true);\r\n\r\n\t\tconst formData = this.prepareFormData(collectedForumPostMetaData);\r\n\t\tsendAjax(formData).then(\r\n\t\t\t(response) => {\r\n\t\t\t\tconsole.warn('response:', response);\r\n\t\t\t\tonAjaxSuccess(response, formData, sendButton);\r\n\t\t\t},\r\n\t\t\t(ajaxError) => onAjaxError(sendButton, ajaxError)\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default FormController;\r\n","const { NOTICE_LENGTH, POPUP_LABELS } = FLAG_REASONS_METADATA;\n\nconst swapElement = (referenceNode, html) => {\n\tconst tmpParent = document.createElement('div');\n\ttmpParent.innerHTML = html;\n\n\tconst newElement = tmpParent.removeChild(tmpParent.firstElementChild);\n\treferenceNode.parentNode.insertBefore(newElement, referenceNode);\n\treferenceNode.remove();\n\n\t// return newElement;\n};\n\nconst elementsHTMLMap = new Map([\n\t[\n\t\t'textarea',\n\t\t`<textarea id=\"customReportReason\"\n\t\t\tclass=\"report-reason-popup__custom-report-reason\"\n\t\t\tname=\"reportReason\"\n\t\t\tdata-requirable=\"true\"\n\t\t\tmaxlength=\"${NOTICE_LENGTH}\"\n\t\t\trows=\"3\"\n\t\t\tcols=\"47\"></textarea>`,\n\t],\n\t[\n\t\t'getListItem',\n\t\t({ reasonKey, reasonValue, index, isLast, textAreaDOM }) => {\n\t\t\treturn `\n\t\t\t\t<!-- TODO: handle checking inputs while tabbing -->\n\t\t\t\t<li tabindex=\"1\">\n\t\t\t\t\t<label for=\"${reasonKey}\">\n\t\t\t\t\t\t<input id=\"${reasonKey}\" \n\t\t\t\t\t\t\t\ttype=\"radio\" \n\t\t\t\t\t\t\t\tvalue=\"${index}\" \n\t\t\t\t\t\t\t\tname=\"reportReason\" \n\t\t\t\t\t\t\t\tdata-requirable=\"true\">\n\t\t\t\t\t\t${reasonValue}\n\t\t\t\t\t</label>\n\t\t\t\t\t${isLast ? textAreaDOM : ''}\n\t\t\t\t</li>\n\t\t\t`;\n\t\t},\n\t],\n\t[\n\t\t'getPopupWrapper',\n\t\t(listItemsDOM) => {\n\t\t\treturn `\n\t\t\t\t<div id=\"reportReasonPopup\" class=\"report-reason-popup\">\n\t\t\t\t\t<p>${POPUP_LABELS.HEADER}</p>\n\t\t\t\t\t\n\t\t\t\t\t<form method=\"post\" class=\"report-reason-popup__form\">\n\t\t\t\t\t\t<ul id=\"reportReasonList\" class=\"report-reason-popup__list\">${listItemsDOM}</ul>\n\t\t\t\t\t\n\t\t\t\t\t\t<p id=\"reportReasonValidationError\" class=\"report-reason-popup__validation-error\">${POPUP_LABELS.NO_REASON_CHECKED}</p>\n\t\t\t\t\t\t\n\t\t\t\t\t\t<!-- TODO: why its input not button? -->\n\t\t\t\t\t\t<input id=\"cancelReportReason\" type=\"button\" value=\"${POPUP_LABELS.CANCEL}\" class=\"report-reason-popup__button report-reason-popup__button--cancel\">\n\t\t\t\t\t\t<button id=\"sendReportReason\" type=\"submit\" class=\"report-reason-popup__button report-reason-popup__button--save\">${POPUP_LABELS.SEND}</button>\n\t\t\t\t\t</form>\n\t\t\t\t</div>\n\t\t\t\t<div id=\"reportReasonSuccessInfo\" class=\"report-reason-popup__success-info\">\n\t\t\t\t\t${POPUP_LABELS.REPORT_SENT}\n\t\t\t\t\t<button id=\"closeReportReasonSentInfo\" class=\"report-reason-popup__button report-reason-popup__button--close\" type=\"button\">${POPUP_LABELS.CLOSE}</button>\n\t\t\t\t</div>`;\n\t\t},\n\t],\n]);\n\nfunction updateCurrentPostFlags(currentFlagsHTML, { postType, postId }) {\n\tconst flagsMetadataWrapper =\n\t\tpostType === 'q' ? questionViewMeta : document.querySelector(`#${postType}${postId} .qa-${postType}-item-meta`);\n\tconst targetElementSelector = `.qa-${postType}-item-flags`;\n\tconst targetElement = flagsMetadataWrapper.querySelector(targetElementSelector);\n\n\tif (targetElement) {\n\t\t/*swapElement(targetElement, currentFlagsHTML);*/\n\t\ttargetElement.outerHTML = currentFlagsHTML;\n\t} else {\n\t\tconst responseAsDOM = new DOMParser()\n\t\t\t.parseFromString(currentFlagsHTML, 'text/html')\n\t\t\t.querySelector(targetElementSelector);\n\t\tflagsMetadataWrapper.appendChild(responseAsDOM);\n\t}\n}\n\nexport { swapElement, elementsHTMLMap, updateCurrentPostFlags };\n","import { elementsHTMLMap } from './misc';\nimport FormController from \"./formController\";\n// import submitForm from \"./formController\";\nimport handleFlagClick from './flagController';\n\nclass PopupFactory {\n\tconstructor(submitForm) {\n\t\tthis.reportReasonPopupDOMWrapper = null;\n\t\tthis.reportReasonPopupDOMReferences = null;\n\t\tthis.submitForm = submitForm;\n\n\t\tthis.initReportReasonPopupDOMWrapper();\n\t\tthis.initOffClickHandler();\n\t\tthis.initReasonList();\n\t\tthis.initButtons();\n\t\tthis.initPopupContainer();\n\t\tthis.initPopupDOMReferences();\n\t}\n\n\tinitOffClickHandler() {\n\t\tthis.reportReasonPopupDOMWrapper.addEventListener('click', (event) => {\n\t\t\tconst checkDOMElementsId = (DOMElement) =>\n\t\t\t\tDOMElement.id === 'reportReasonPopup' || DOMElement.id === 'reportReasonSuccessInfo';\n\t\t\tconst clickedOutsidePopup = !event.composedPath().some(checkDOMElementsId);\n\n\t\t\tif (clickedOutsidePopup) {\n\t\t\t\tthis.hideReportReasonPopup();\n\t\t\t}\n\t\t});\n\t}\n\n\tinitReasonList() {\n\t\tconst reasonList = this.reportReasonPopupDOMWrapper.querySelector('#reportReasonList');\n\t\treasonList.addEventListener('change', ({ target }) => {\n\t\t\tthis.reportReasonPopupDOMReferences.reportReasonValidationError.classList.remove(\n\t\t\t\t'report-reason-popup__validation-error--show'\n\t\t\t);\n\n\t\t\tif (reasonList.children[reasonList.children.length - 1].contains(target)) {\n\t\t\t\tthis.reportReasonPopupDOMReferences.customReportReason.classList.add(\n\t\t\t\t\t'report-reason-popup__custom-report-reason--show'\n\t\t\t\t);\n\t\t\t\tsetTimeout(\n\t\t\t\t\tthis.reportReasonPopupDOMReferences.customReportReason.focus.bind(\n\t\t\t\t\t\tthis.reportReasonPopupDOMReferences.customReportReason\n\t\t\t\t\t)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tthis.reportReasonPopupDOMReferences.customReportReason.classList.remove(\n\t\t\t\t\t'report-reason-popup__custom-report-reason--show'\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tinitButtons() {\n\t\tconst cancelButton = this.reportReasonPopupDOMWrapper.querySelector('#cancelReportReason');\n\t\tcancelButton.addEventListener('click', this.hideReportReasonPopup);\n\n\t\tconst sendButton = this.reportReasonPopupDOMWrapper.querySelector('#sendReportReason');\n\t\tsendButton.addEventListener('click', (event) => {\n\t\t\tthis.submitForm(event, this.collectForumPostMetaData());\n\t\t});\n\n\t\tconst closeReportReasonSentInfo = this.reportReasonPopupDOMWrapper.querySelector('#closeReportReasonSentInfo');\n\t\tcloseReportReasonSentInfo.addEventListener('click', this.hideReportReasonPopup);\n\t}\n\n\tinitPopupContainer() {\n\t\tconst popupContainer = document.querySelector('.qa-body-wrapper');\n\t\tpopupContainer.appendChild(this.reportReasonPopupDOMWrapper);\n\t}\n\n\tinitReportReasonPopupDOMWrapper() {\n\t\tconst listItemsDOM = Object.entries(FLAG_REASONS_METADATA.REASON_LIST).reduce(\n\t\t\t(listItems, [reasonKey, reasonValue], index, flagReasonsCollection) => {\n\t\t\t\tconst isLast = index === flagReasonsCollection.length - 1;\n\t\t\t\tconst textAreaDOM = isLast && elementsHTMLMap.get('textarea');\n\n\t\t\t\treturn (\n\t\t\t\t\tlistItems +\n\t\t\t\t\telementsHTMLMap.get('getListItem')({\n\t\t\t\t\t\treasonKey,\n\t\t\t\t\t\treasonValue,\n\t\t\t\t\t\tindex,\n\t\t\t\t\t\tisLast,\n\t\t\t\t\t\ttextAreaDOM,\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t},\n\t\t\t''\n\t\t);\n\n\t\tconst popupWrapper = document.createElement('div');\n\t\tpopupWrapper.classList.add('report-reason-wrapper');\n\t\tpopupWrapper.innerHTML = elementsHTMLMap.get('getPopupWrapper')(listItemsDOM);\n\n\t\tthis.reportReasonPopupDOMWrapper = popupWrapper;\n\t}\n\n\tinitPopupDOMReferences() {\n\t\tthis.reportReasonPopupDOMReferences = {\n\t\t\treportReasonPopup: this.reportReasonPopupDOMWrapper.querySelector('#reportReasonPopup'),\n\t\t\treportReasonPopupForm: this.reportReasonPopupDOMWrapper.querySelector('form'),\n\t\t\tcustomReportReason: this.reportReasonPopupDOMWrapper.querySelector('#customReportReason'),\n\t\t\treportReasonSuccessInfo: this.reportReasonPopupDOMWrapper.querySelector('#reportReasonSuccessInfo'),\n\t\t\trequirableFormElements: this.reportReasonPopupDOMWrapper.querySelectorAll('[data-requirable=\"true\"]'),\n\t\t\treportReasonValidationError: this.reportReasonPopupDOMWrapper.querySelector('#reportReasonValidationError'),\n\t\t};\n\t}\n\n\tshowReportReasonPopup() {\n\t\tthis.reportReasonPopupDOMWrapper.classList.add('report-reason-wrapper--show');\n\t}\n\n\thideReportReasonPopup() {\n\t\tthis.reportReasonPopupDOMReferences.reportReasonSuccessInfo.classList.remove(\n\t\t\t'report-reason-popup__success-info--show'\n\t\t);\n\t\tthis.reportReasonPopupDOMWrapper.classList.remove('report-reason-wrapper--show');\n\t\tthis.reportReasonPopupDOMReferences.customReportReason.classList.remove(\n\t\t\t'report-reason-popup__custom-report-reason--show'\n\t\t);\n\t\tthis.reportReasonPopupDOMReferences.reportReasonPopup.classList.remove('report-reason-popup--hide');\n\t\tthis.reportReasonPopupDOMReferences.reportReasonValidationError.classList.remove(\n\t\t\t'report-reason-popup__validation-error--show'\n\t\t);\n\t\tthis.reportReasonPopupDOMReferences.reportReasonPopupForm.reset();\n\t}\n\n\t// getReportReasonPopupDOMWrapper() {\n\t// \treturn this.reportReasonPopupDOMWrapper;\n\t// }\n\n\tgetReportReasonPopupDOMReferences() {\n\t\treturn this.reportReasonPopupDOMReferences;\n\t}\n}\n\nfunction init() {\n\tconst reportReasonPopup = new PopupFactory();\n\tconst reportReasonPopupDOMReferences = reportReasonPopup.getReportReasonPopupDOMReferences();\n\t/*const formController = */new FormController(reportReasonPopupDOMReferences.reportReasonPopupForm);\n\t// const reportReasonPopupDOMWrapper = reportReasonPopup.getReportReasonPopupDOMWrapper();\n\n\tconsole.warn(\n\t\t'reportReasonPopupDOMReferences: ',\n\t\treportReasonPopupDOMReferences /*, ' /reportReasonPopupDOMWrapper: ', reportReasonPopupDOMWrapper*/\n\t);\n\n\treturn {\n\t\t/*reportReasonPopupDOMWrapper,*/ reportReasonPopupDOMReferences,\n\t\tshowReportReasonPopup: reportReasonPopup.showReportReasonPopup.bind(reportReasonPopup),\n\t};\n}\n\n// export { reportReasonPopupDOMReferences, reportReasonPopupDOMWrapper };\nexport default init;\n// export default bootstrapReportReasonPopup;\n","function getUnFlagButtonHTML({ postType, questionId, postId, parentId }) {\n\tlet namePrefix = postType + postId;\n\tlet onclick = '';\n\n\tconst nameSuffix = '_dounflag';\n\tconst value = 'wycofaj zgłoszenie';\n\tconst title = 'Wycofaj zgłoszenie tej treści';\n\tconst type = 'submit';\n\tconst clazz = 'qa-form-light-button qa-form-light-button-unflag';\n\n\tswitch (postType) {\n\t\tcase 'q': {\n\t\t\tonclick = 'qa_show_waiting_after(this, false)';\n\t\t\tnamePrefix = postType;\n\t\t\tbreak;\n\t\t}\n\t\tcase 'a': {\n\t\t\tonclick = `return qa_answer_click(${postId}, ${questionId}, this);`;\n\t\t\tbreak;\n\t\t}\n\t\tcase 'c': {\n\t\t\tonclick = `return qa_comment_click(${postId}, ${questionId}, ${parentId}, this);`;\n\t\t\tbreak;\n\t\t}\n\t\tdefault: {\n\t\t\tthrow new Error(`Unrecognized postType: ${postType} for questionId: ${questionId} and postId: ${postId}`);\n\t\t}\n\t}\n\n\treturn `\n\t\t<input name=\"${namePrefix}${nameSuffix}\" \n\t\t\tonclick=\"${onclick}\"\n\t\t\tvalue=\"${value}\"\n\t\t\ttitle=\"${title}\"\n\t\t\ttype=\"${type}\" \n\t\t\tclass=\"${clazz}\">\n\t`;\n}\n\nexport default getUnFlagButtonHTML;\n"],"sourceRoot":""}