(window.webpackJsonp=window.webpackJsonp||[]).push([[1],[,,,,function(e,t,o){"use strict";o.r(t);var r,n,a=o(8),s=o.n(a),c=o(9),i=o.n(c),p=o(7),u=o.n(p),l=o(0),d=o.n(l),f=o(1),m=o.n(f),b=function(e){return new Promise((function(t,o){var r=setTimeout((function(){o("AJAX_TIMEOUT")}),5e3);fetch("/report-flag",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}).then(function(){var e=m()(d.a.mark((function e(o){return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:clearTimeout(r),console.warn("fetch response: ",o),t(o.json());case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}))},y=FLAG_REASONS_METADATA,v=y.NOTICE_LENGTH,h=y.POPUP_LABELS,g=new Map([["textarea",'<textarea id="customReportReason"\n        class="report-reason-popup__custom-report-reason"\n        name="reportReason"\n        data-requirable="true"\n        maxlength="'.concat(v,'"\n        rows="3"\n        cols="47"></textarea>')],["getListItem",function(e){var t=e.reasonKey,o=e.reasonValue,r=e.index,n=e.isLast,a=e.textAreaDOM;return'\n            \x3c!-- TODO: handle checking inputs while tabbing --\x3e\n            <li tabindex="1">\n                <label for="'.concat(t,'">\n                    <input id="').concat(t,'" \n                            type="radio" \n                            value="').concat(r,'" \n                            name="reportReason" \n                            data-requirable="true">\n                    ').concat(o,"\n                </label>\n                ").concat(n?a:"","\n            </li>\n        ")}],["getPopupWrapper",function(e){return'\n            <div id="reportReasonPopup" class="report-reason-popup">\n                <p>'.concat(h.HEADER,'</p>\n                \n                <form method="post" class="report-reason-popup__form">\n                    <ul id="reportReasonList" class="report-reason-popup__list">').concat(e,'</ul>\n                \n                    <p id="reportReasonValidationError" class="report-reason-popup__validation-error">').concat(h.NO_REASON_CHECKED,'</p>\n                    \n                    \x3c!-- TODO: why its input not button? --\x3e\n                    <input id="cancelReportReason" type="button" value="').concat(h.CANCEL,'" class="report-reason-popup__button report-reason-popup__button--cancel">\n                    <button id="sendReportReason" type="submit" class="report-reason-popup__button report-reason-popup__button--save">').concat(h.SEND,'</button>\n                </form>\n            </div>\n            <div id="reportReasonSuccessInfo" class="report-reason-popup__success-info">\n                ').concat(h.REPORT_SENT,'\n                <button id="closeReportReasonSentInfo" class="report-reason-popup__button report-reason-popup__button--close" type="button">').concat(h.CLOSE,"</button>\n            </div>")}]]),_=(r=Object.entries(FLAG_REASONS_METADATA.REASON_LIST).reduce((function(e,t,o,r){var n=u()(t,2),a=n[0],s=n[1],c=o===r.length-1,i=c&&g.get("textarea");return e+g.get("getListItem")({reasonKey:a,reasonValue:s,index:o,isLast:c,textAreaDOM:i})}),""),(n=document.createElement("div")).classList.add("report-reason-wrapper"),n.innerHTML=g.get("getPopupWrapper")(r),n),w={reportReasonPopup:_.querySelector("#reportReasonPopup"),reportReasonPopupForm:_.querySelector("form"),customReportReason:_.querySelector("#customReportReason"),reportReasonSuccessInfo:_.querySelector("#reportReasonSuccessInfo"),requirableFormElements:_.querySelectorAll('[data-requirable="true"]'),reportReasonValidationError:_.querySelector("#reportReasonValidationError")};function R(e,t){var o=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),o.push.apply(o,r)}return o}function q(e){for(var t=1;t<arguments.length;t++){var o=null!=arguments[t]?arguments[t]:{};t%2?R(Object(o),!0).forEach((function(t){s()(e,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):R(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}console.warn("reportReasonPopupDOMWrapper: ",_);var S=w.reportReasonPopup,O=w.reportReasonPopupForm,E=w.customReportReason,I=w.reportReasonSuccessInfo,L=w.requirableFormElements,x=w.reportReasonValidationError,P=document.querySelector(".qa-q-view-meta"),j={regex:{question:/q_doflag/,answer:/^a(\d+)_doflag/,comment:/^c(\d+)_doflag/,doComment:/^a(\d+)_docomment/},getPostIdFromInputName:function(e,t){var o=t.match(this.regex[e]);return u()(o,2)[1]},recognizeInputKindByName:function(e){var t=Object.entries(this.regex).find((function(t){var o=u()(t,2);o[0];return o[1].test(e)}));return u()(t,1)[0]},collectForumPostMetaData:function(){var e=this.recognizeInputKindByName(T.name),t={questionId:T.form.getAttribute("action").split("/")[1],postType:e.slice(0,1)};return t.postId=this.getPostIdFromInputName(e,T.name)||t.questionId,t}},A=!1,T=null,D=function(){I.classList.remove("report-reason-popup__success-info--show"),_.classList.remove("report-reason-wrapper--show"),E.classList.remove("report-reason-popup__custom-report-reason--show"),S.classList.remove("report-reason-popup--hide"),x.classList.remove("report-reason-popup__validation-error--show"),O.reset()},k=function(){if(A)throw"bootstrapReportReasonPopup should be called only once!";var e;_.addEventListener("click",(function(e){!e.composedPath().some((function(e){return"reportReasonPopup"===e.id||"reportReasonSuccessInfo"===e.id}))&&D()})),(e=_.querySelector("#reportReasonList")).addEventListener("change",(function(t){var o=t.target;x.classList.remove("report-reason-popup__validation-error--show"),e.children[e.children.length-1].contains(o)?(E.classList.add("report-reason-popup__custom-report-reason--show"),setTimeout(E.focus.bind(E))):E.classList.remove("report-reason-popup__custom-report-reason--show")})),_.querySelector("#cancelReportReason").addEventListener("click",D),_.querySelector("#sendReportReason").addEventListener("click",N),_.querySelector("#closeReportReasonSentInfo").addEventListener("click",D),document.querySelector(".qa-body-wrapper").appendChild(_),A=!0};function N(e){e.preventDefault();var t=e.target;if(t.blur(),function(e){var t=i()(L).some((function(e){var t="radio"===e.type&&"custom"!==e.value&&e.checked,o="textarea"===e.tagName.toLowerCase()&&e.value;return t||o}));t||function(e){x.classList.add("report-reason-popup__validation-error--show"),e.classList.add("report-reason-popup__button--save--validation-blink"),setTimeout((function(){e.classList.remove("report-reason-popup__button--save--validation-blink")}),1e3)}(e);return t}(t)){z(t,!0);var o,r,n,a,s,c=(o=j.collectForumPostMetaData(),r=new FormData(O).getAll("reportReason"),n=u()(r,2),a=n[0],s=n[1],q(q({},o),{},{reasonId:a,notice:s,reportType:"addFlag"}));b(c).then((function(e){console.warn("response:",e),function(e,t,o){z(o,!1),function(e,t){var o=t.postType,r=t.postId,n="q"===o?P:document.querySelector("#".concat(o).concat(r," .qa-").concat(o,"-item-meta")),a=".qa-".concat(o,"-item-flags"),s=n.querySelector(a);if(s)s.outerHTML=e;else{var c=(new DOMParser).parseFromString(e,"text/html").querySelector(a);n.appendChild(c)}}(e.currentFlags,t),function(e,t){var o=document.createElement("div");o.innerHTML=t;var r=o.removeChild(o.firstElementChild);e.parentNode.insertBefore(r,e),e.remove()}(T,function(e){var t=e.postType,o=e.questionId,r=e.postId,n=e.parentId;switch(t){case"q":return'\n        <input name="q_dounflag" \n          onclick="qa_show_waiting_after(this, false);" \n          value="wycofaj zgłoszenie" \n          title="Wycofaj zgłoszenie tej treści" \n          type="submit" \n          class="qa-form-light-button qa-form-light-button-unflag">\n      ';case"a":return'\n        <input name="a'.concat(r,'_dounflag" \n            onclick="return qa_answer_click(').concat(r,", ").concat(o,', this);" \n            value="wycofaj zgłoszenie" \n            title="Wycofaj zgłoszenie tej treści" \n            type="submit" \n            class="qa-form-light-button qa-form-light-button-unflag">\n      ');case"c":return'\n        <input name="c'.concat(r,'_dounflag" \n            onclick="return qa_comment_click(').concat(r,", ").concat(o,", ").concat(n,', this);" \n            value="wycofaj zgłoszenie" \n            title="Wycofaj zgłoszenie tej treści" \n            type="submit" \n            class="qa-form-light-button qa-form-light-button-unflag">\n      ');default:console.error("Unrecognized postType!",t," /questionId: ",o," /postId: ",r)}}({postType:t.postType,questionId:t.questionId,postId:t.postId,parentId:C()})),S.classList.add("report-reason-popup--hide"),I.classList.add("report-reason-popup","report-reason-popup__success-info--show")}(e,c,t)}),(function(e){return function(e,t){z(e,!1),console.warn("ajaxError:",t)}(t,e)}))}}function z(e,t){t?(e.disabled=!0,window.qa_show_waiting_after(e,!0)):(window.qa_hide_waiting(e),e.disabled=!1)}function C(){var e=T.closest('[id*="_list"]');return e?e.id.slice(1,e.id.indexOf("_")):null}k.handler=function(e){e.target.name&&e.target.name.endsWith("doflag")&&(e.preventDefault(),e.stopPropagation(),t=e.target,T=t,o=t.form.action,O.action=o,_.classList.add("report-reason-wrapper--show"));var t,o};t.default=k},function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var o=0,r=new Array(t);o<t;o++)r[o]=e[o];return r}},function(e,t,o){var r=o(5);e.exports=function(e,t){if(e){if("string"==typeof e)return r(e,t);var o=Object.prototype.toString.call(e).slice(8,-1);return"Object"===o&&e.constructor&&(o=e.constructor.name),"Map"===o||"Set"===o?Array.from(e):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?r(e,t):void 0}}},function(e,t,o){var r=o(13),n=o(14),a=o(6),s=o(15);e.exports=function(e,t){return r(e)||n(e,t)||a(e,t)||s()}},function(e,t){e.exports=function(e,t,o){return t in e?Object.defineProperty(e,t,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[t]=o,e}},function(e,t,o){var r=o(10),n=o(11),a=o(6),s=o(12);e.exports=function(e){return r(e)||n(e)||a(e)||s()}},function(e,t,o){var r=o(5);e.exports=function(e){if(Array.isArray(e))return r(e)}},function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}},function(e,t){e.exports=function(e){if(Array.isArray(e))return e}},function(e,t){e.exports=function(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var o=[],r=!0,n=!1,a=void 0;try{for(var s,c=e[Symbol.iterator]();!(r=(s=c.next()).done)&&(o.push(s.value),!t||o.length!==t);r=!0);}catch(e){n=!0,a=e}finally{try{r||null==c.return||c.return()}finally{if(n)throw a}}return o}}},function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}}]]);